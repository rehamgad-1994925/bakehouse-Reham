pipeline {
    agent any 
    parameters {
        choice(name:'BRANCH' ,choice:[release] )
    }
      stage('Building our image') { 
            steps { 

            checkout scm
            
                script { 
                sh'git checkout ${params.BRANCH}'
                sh 'docker login --username rehamgad1994  --password $password'
                sh 'docker build -t rehamgad1994/lab  . '
            
                }
            }   
        stage (deploy k8s) {

           steps{

               sh "kubectl apply -f my-deploy.yml "
               sh  "kubectl apply -f nodeport.yml " 


           }

        }


    }
}

